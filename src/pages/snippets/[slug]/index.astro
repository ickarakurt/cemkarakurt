---
import SnippetDetails from "@layouts/SnippetDetails.astro";
import { type CollectionEntry, getCollection } from "astro:content";

export interface Props {
  snippet: CollectionEntry<"snippet">;
}

export async function getStaticPaths() {
  const snippets = await getCollection("snippet", ({ data }) => !data.draft);

  const snippetsResult = snippets.map(snippet => ({
    params: { slug: snippet.slug },
    props: { snippet },
  }));

  return snippetsResult;
}

const { snippet } = Astro.props;
---

<SnippetDetails snippet={snippet} />
