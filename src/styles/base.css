@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root,
  html[data-theme="light"] {
    --color-fill: 250, 250, 249;
    --color-text-base: 10, 10, 10;
    --color-accent: 245, 158, 11;
    --color-card: 255, 255, 255;
    --color-card-muted: 245, 245, 244;
    --color-border: 230, 230, 230;
    --color-grid: 230, 230, 230;
  }

  html[data-theme="dark"] {
    --color-fill: 10, 10, 10;
    --color-text-base: 250, 250, 249;
    --color-accent: 245, 158, 11;
    --color-card: 20, 20, 20;
    --color-card-muted: 30, 30, 30;
    --color-border: 40, 40, 40;
    --color-grid: 25, 25, 25;
  }

  #sun-svg,
  html[data-theme="dark"] #moon-svg {
    display: none;
  }
  #moon-svg,
  html[data-theme="dark"] #sun-svg {
    display: block;
  }

  body {
    @apply flex min-h-[100svh] flex-col bg-skin-fill font-sans text-skin-base antialiased;
    font-family: "Space Grotesk", system-ui, sans-serif;
    overflow-x: hidden;
  }

  /* Animated Grid Background */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
      linear-gradient(rgba(var(--color-grid), 0.3) 1px, transparent 1px),
      linear-gradient(90deg, rgba(var(--color-grid), 0.3) 1px, transparent 1px);
    background-size: 60px 60px;
    pointer-events: none;
    z-index: 0;
    opacity: 0.5;
    animation: gridPulse 8s ease-in-out infinite;
  }

  @keyframes gridPulse {
    0%,
    100% {
      opacity: 0.3;
    }
    50% {
      opacity: 0.6;
    }
  }

  section,
  footer {
    @apply mx-auto max-w-6xl px-6 relative z-10;
  }

  a {
    @apply transition-all duration-300 outline-none focus-visible:ring-2 focus-visible:ring-skin-accent/40 rounded;
  }

  svg {
    @apply inline-block h-6 w-6 fill-none stroke-current stroke-2 transition-colors;
  }

  .prose {
    @apply prose-zinc dark:prose-invert max-w-none;
    @apply prose-headings:font-display prose-headings:tracking-tight;
    @apply prose-a:font-medium prose-a:no-underline prose-a:border-b prose-a:border-skin-accent/30 hover:prose-a:border-skin-accent;
    @apply prose-code:rounded-md prose-code:bg-skin-card-muted prose-code:px-1.5 prose-code:py-0.5 prose-code:before:content-none prose-code:after:content-none prose-code:font-mono prose-code:text-sm;
  }

  /* ===== scrollbar ===== */
  html {
    overflow-y: scroll;
    scrollbar-gutter: stable;
  }

  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-skin-accent/30 rounded-full hover:bg-skin-accent/50 transition-colors;
  }

  /* ===== Code Blocks & Syntax Highlighting ===== */
  pre:has(code) {
    @apply rounded-lg border border-skin-border bg-skin-card-muted overflow-hidden;
  }

  code,
  blockquote {
    word-wrap: break-word;
  }

  pre > code {
    white-space: pre;
    @apply block p-5 text-sm leading-relaxed font-mono;
  }

  html[data-theme="dark"] pre:has(code),
  html[data-theme="dark"] pre:has(code) span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
  }

  /* ===== Selection Styling ===== */
  ::selection {
    background-color: rgba(var(--color-accent), 0.3);
    color: rgb(var(--color-text-base));
  }
}

@layer components {
  .display-none {
    @apply hidden;
  }

  .focus-outline {
    @apply outline-none focus-visible:ring-2 focus-visible:ring-skin-accent/40 focus-visible:ring-offset-2 focus-visible:ring-offset-skin-fill;
  }

  /* Monospace accent utility */
  .mono-accent {
    @apply font-mono text-xs uppercase tracking-widest text-skin-accent;
  }

  /* Magnetic hover effect container */
  .magnetic-hover {
    transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Stagger animation utilities */
  .stagger-in {
    animation: staggerIn 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    opacity: 0;
  }

  @keyframes staggerIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Data attribute badge */
  .data-badge {
    @apply font-mono text-[10px] px-2 py-0.5 rounded bg-skin-card-muted text-skin-base/50 border border-skin-border/50;
  }

  /* Technical line decoration */
  .tech-line {
    position: relative;
  }

  .tech-line::before {
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    width: 40px;
    height: 1px;
    background: linear-gradient(
      90deg,
      rgba(var(--color-accent), 0.6),
      transparent
    );
  }
}
